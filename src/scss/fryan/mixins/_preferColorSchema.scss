@mixin color($preferColor: 'light') {
  @if
    ($preferColor == 'light') or
    ($preferColor == 'l') or
    ($preferColor == 'L')
  {
    @at-root #{"body[data-prefers-color='auto'] " + &}, &{
      @media (prefers-color-scheme: 'light'), (min-width: 0) {
        @content;
      }
    }
    @at-root #{"body[data-prefers-color='light'] " + &} {
      @extend %colorTransition;
      @content;
    }
  }
  @else if
    ($preferColor == 'dark') or
    ($preferColor =='d') or
    ($preferColor =='D')
  {
    @at-root #{"body[data-prefers-color='auto'] " + &} {
      @media (prefers-color-scheme: 'dark') {
        @content;
      }
    }
    @at-root #{"body[data-prefers-color='dark'] " + &} {
      @content;
    }
  }
  @else {
    @error 'Invalid variable "#{$preferColor }".';
  }
}

@mixin light {
  @include color('light') {@content;}
}
@mixin dark {
  @include color('dark') {@content;}
}

%colorTransition {
  transition: .3s ease;
}